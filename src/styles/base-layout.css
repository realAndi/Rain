/* Rain Terminal - Reset, Global Styles, Main Layout */

/* Font fallback for Nerd Font icons and Powerline symbols */
@font-face {
  font-family: "Rain Symbols Fallback";
  src: local("Symbols Nerd Font Mono"),
       local("Symbols Nerd Font"),
       local("Nerd Font Symbols"),
       local("PowerlineSymbols"),
       local("Noto Sans Symbols 2"),
       local("Noto Sans Symbols"),
       local("Apple Symbols"),
       local("Segoe UI Symbol");
  unicode-range: U+E000-U+F8FF, U+F0000-U+FFFFF, U+2580-U+259F, U+2500-U+257F, U+E0A0-U+E0D4;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body, #root {
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: transparent;
}

body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

.rain-app {
  width: 100%;
  height: 100%;
  background: transparent;
  color: var(--fg);
  display: flex;
  flex-direction: column;
  position: relative;
  isolation: isolate;
  overflow: hidden;
  outline: 2px solid var(--glass-frame-border, var(--border));
  outline-offset: -1px;
  font-family: "JetBrains Mono", "SF Mono", "Menlo", "Monaco", "Courier New", monospace;
  --glass-tint: var(--bg);
  --glass-body: color-mix(
    in srgb,
    var(--glass-tint) var(--glass-base-opacity, var(--surface-body-opacity, 0%)),
    transparent
  );
  --glass-elevated: color-mix(in srgb, var(--glass-body) 90%, var(--fg) 10%);
  --glass-hover: color-mix(in srgb, var(--glass-body) 77%, var(--fg) 23%);
  --glass-active: color-mix(in srgb, var(--glass-body) 68%, var(--fg) 32%);
  --glass-border-soft: color-mix(in srgb, var(--glass-body) 72%, var(--fg) 28%);
  --glass-border-strong: color-mix(in srgb, var(--glass-body) 58%, var(--fg) 42%);
}

.rain-app::before,
.rain-app::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  transition: background 140ms linear, -webkit-backdrop-filter 180ms ease,
    backdrop-filter 180ms ease;
}

/* Uniform blur overlay */
.rain-app::before {
  background: color-mix(
    in srgb,
    var(--glass-tint) var(--glass-backdrop-overlay, 0%),
    transparent
  );
  -webkit-backdrop-filter: var(--glass-backdrop-filter, none);
  backdrop-filter: var(--glass-backdrop-filter, none);
}

.rain-app::after {
  display: none;
}

.rain-app > * {
  position: relative;
  z-index: 1;
}

.terminal-area {
  flex: 1;
  min-height: 0;
  position: relative;
  background: var(--custom-shell-bg, var(--glass-body));
  overflow: hidden;
}

/* ---- Window highlight ring (shown when hovering a move-to-window menu item) ---- */

.rain-app.rain-window-highlighted {
  box-shadow: inset 0 0 0 3px var(--accent);
  transition: box-shadow 0.15s ease;
}

/* Cross-platform blur fallback */
@supports not (-webkit-backdrop-filter: blur(1px)) {
  .rain-app {
    background: var(--bg, #0e0e0e) !important;
  }
}

/* Windows: round corners to match Win11 chrome */
.rain-app[data-platform="windows"] {
  outline-width: 1px;
  border-radius: 8px;
}
